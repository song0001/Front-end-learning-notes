<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- 什么是设计模式?     
        设计模式是软件发展过程中,人们在长期的开发实践中,总结出来的,用于处理特定业务或者问题的编码组织形式.
    大概一共总结了23种,比如单历模式,观察者模式,发布订阅模式,工厂模式等....跟具体的语言是没有没关系. -->

    <!-- 比如购房: 购房中心接受订房. 楼盘分类A 89平, B 119平, C 140平 . 客户可以根据需求订房. 但不同类型的房子
    建成时间不同. -->
   <script>
       // 购房中心
       var center = {
           // 事件集合
            fns: {
                // A: [fn1,fn2,fn3....],
                // B: [fna,fnb,fnc....],
                // C: []
            },
            // 注册事件
            register(type,fn){
                // fn可以加参数 
                // 如果是第一个来注册的 先创建事件对象
                if(!this.fns[type]){
                    this.fns[type] = [];
                }
                this.fns[type].push(fn);
                return this;
            }, 
            // 通知
            notify(type){
                // 获取当前类型的所有事件
                var events = this.fns[type];
                // 可以通过
                // 挨着通知
                // arguments.callee  能够获取所有函数的实参
                for(var i = 0 ; i < events.length ; i++){
                    var evn = events[i];
                    // 执行
                    evn.call(this);
                }

            }
       }
       // 用户
       var a = function(){
           console.log('张三购买了A户型....');
       }
       var b = function(){
           console.log('李四购买了A户型....');
       }
       var c = function(){
           console.log('王五购买了B户型....');
       }

       // 注册  链式调用
       center.register('A',a)
            .register('A',b)
            .register('B',c);
    
       // 通知
    //    假设3年后A户型建成,5年后B户型建成
       setTimeout(function(){
            center.notify('A');
            setTimeout(function(){
                center.notify('B');
            },2000)
       },3000)
   </script>

</body>
</html>